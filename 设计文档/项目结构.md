# QK Chat App 项目结构

## 项目目录结构

```
QK_Chat_App/                     # 项目根目录
├── client/                      # 客户端项目
│   ├── src/                     # 源代码
│   │   ├── main.cpp             # 主入口
│   │   ├── network/             # 网络模块
│   │   │   ├── ChatClient.cpp   # 通信核心
│   │   │   └── FileTransfer.cpp # 文件传输
│   │   ├── ui/                  # 界面层
│   │   │   ├── LoginWidget.cpp  # 登录界面
│   │   │   └── ChatWindow.cpp   # 聊天主界面
│   │   └── database/            # 数据模块
│   │       └── LocalCache.cpp   # SQLite管理
│   ├── resources/               # 资源文件
│   │   ├── qml/                 # QML组件
│   │   │   ├── MessageBubble.qml
│   │   │   └── ContactList.qml
│   │   └── icons/               # 图标资源
│   ├── config/                  # 配置中心
│   │   ├── dev.ini              # 开发环境配置
│   │   └── config_loader.cpp    # 配置加载器
│   ├── database/                # 本地数据库存储
│   │   └── local_cache.db       # SQLite数据库文件
│   └── CMakeLists.txt           # 构建配置
│
├── server/                      # 服务端项目
│   ├── src/                     # 源代码
│   │   ├── main.cpp             # 主入口
│   │   ├── core/                # 核心逻辑
│   │   │   ├── ChatServer.cpp   # 服务主类
│   │   │   └── SessionManager.cpp # 会话管理
│   │   ├── network/             # 网络模块
│   │   │   ├── SecureServer.cpp # SSL服务器
│   │   │   └── ProtocolParser.cpp # 协议解析
│   │   ├── database/            # 数据模块
│   │   │   └── Database.cpp     # MySQL操作
│   │   └── admin/               # 后台管理模块（新增）
│   │       ├── AdminWindow.cpp  # 管理主窗口
│   │       ├── DashboardWidget.cpp # 仪表板组件
│   │       ├── UserManagerWidget.cpp # 用户管理组件
│   │       ├── SystemConfigWidget.cpp # 系统配置组件
│   │       ├── LogViewerWidget.cpp # 日志查看组件
│   │       └── MonitorWidget.cpp # 实时监控组件
│   ├── resources/               # 资源文件（新增）
│   │   ├── qml/                 # QML管理界面组件
│   │   │   ├── Dashboard.qml    # 仪表板界面
│   │   │   ├── UserList.qml     # 用户列表界面
│   │   │   ├── SystemConfig.qml # 系统配置界面
│   │   │   └── LogViewer.qml    # 日志查看界面
│   │   └── icons/               # 管理界面图标
│   ├── config/                  # 配置中心
│   │   ├── dev.conf             # 开发环境配置
│   │   └── certs/               # TLS证书（开发用）
│   │       ├── server.crt       # 自签名证书
│   │       └── server.key       # 私钥
│   ├── data/                    # 数据存储
│   │   ├── files/               # 上传文件存储
│   │   └── mysql_init.sql       # 数据库初始化脚本
│   └── CMakeLists.txt           # 构建配置
│
├── common/                      # 公共资源
│   ├── protocol/                # 协议定义
│   │   └── chat.proto           # Protobuf协议文件
│   └── crypto/                  # 加密工具
│       └── CryptoUtils.cpp      # 加解密实现
│
├── scripts/                     # 实用脚本
│   ├── init_local_db.sh         # 初始化本地MySQL
│   └── gen_cert.sh              # 生成开发证书
│
└── docker-compose.yml           # 本地开发环境容器配置
```

## 模块说明

### 客户端模块 (client/)
- **src/network/**: 网络通信核心模块，处理与服务器的所有通信
- **src/ui/**: 用户界面模块，包含登录和聊天主界面
- **src/database/**: 本地数据存储模块，管理SQLite数据库
- **resources/**: 静态资源文件，包括QML组件和图标
- **config/**: 配置文件管理，支持不同环境的配置切换

### 服务器端模块 (server/)
- **src/core/**: 核心业务逻辑，包括聊天服务和会话管理
- **src/network/**: 网络服务模块，处理SSL连接和协议解析
- **src/database/**: 数据库操作模块，封装MySQL访问逻辑
- **src/admin/**: 后台管理模块，提供可视化服务器管理界面
- **config/**: 服务器配置和TLS证书管理
- **data/**: 数据存储目录，包括文件存储和数据库初始化脚本
- **resources/**: 管理界面资源文件，包括QML组件和图标

### 公共模块 (common/)
- **protocol/**: 协议定义文件，使用Protobuf定义消息格式
- **crypto/**: 加密工具模块，提供统一的加解密接口

### 开发工具 (scripts/)
- **init_local_db.sh**: 本地开发环境数据库初始化脚本
- **gen_cert.sh**: TLS证书生成脚本

## 构建配置

项目使用CMake作为构建系统，每个子项目都有独立的CMakeLists.txt文件：
- **client/CMakeLists.txt**: 客户端构建配置
- **server/CMakeLists.txt**: 服务器端构建配置

## 开发环境

项目支持Docker容器化部署，通过docker-compose.yml文件配置本地开发环境，包括：
- MySQL数据库服务
- Redis缓存服务（可选）
- MinIO对象存储服务（可选） 